<!doctype html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAIA - RH - Management Strat√©gique V5.5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { 
            --color-cta: #D9A526; /* Jaune Or */
            --color-title: #0F2C48; /* Bleu Nuit */
            --color-rh: #4C1D95; /* Am√©thyste RH */
            --color-surface: #F6F2E8; /* Ivoire / Beige Sable */
            --color-card: #FDFBF7; /* Cr√®me Clair */
            --color-done: #10b981;
            --color-alert: #B4792A; /* Bronze */
        }

        body { font-family: 'Outfit', sans-serif; background-color: var(--color-surface); min-height: 100vh; display: flex; flex-direction: column; color: #334155; }
        
        /* HEADER AUTHENTIQUE */
        .top-bar { background: var(--color-title); border-bottom: 4px solid var(--color-cta); position: sticky; top: 0; z-index: 1000; padding: 10px 0; }
        .logo-header { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--color-cta); object-fit: cover; }
        .nav-link { color: white; opacity: 0.8; padding: 8px 12px; border-radius: 8px; transition: 0.3s; font-weight: 700; font-size: 0.95rem; }
        .nav-link:hover { opacity: 1; color: var(--color-cta); }
        .nav-link.active { opacity: 1; border-bottom: 3px solid var(--color-cta); border-radius: 0; }
        .btn-portfolio { background: var(--color-cta); color: var(--color-title); padding: 6px 16px; border-radius: 8px; font-weight: 800; text-transform: uppercase; font-size: 0.75rem; transition: 0.3s; }
        .btn-portfolio:hover { transform: scale(1.05); filter: brightness(1.1); }

        /* CARDS & STRUCTURE */
        .module-card { background: var(--color-card); border-radius: 20px; margin-bottom: 20px; border: 2px solid var(--color-rh); overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .module-header { width: 100%; text-align: left; padding: 16px 22px; background: white; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-bottom: 2px solid var(--color-cta); }
        .module-header h3 { font-size: 0.9rem; font-weight: 800; color: var(--color-rh); text-transform: uppercase; }
        
        .session-row { padding: 14px 22px; border-bottom: 1px solid rgba(76, 29, 149, 0.1); transition: background 0.3s; }
        .session-code { font-family: 'Fira Code', monospace; color: var(--color-cta); font-weight: 800; font-size: 0.8rem; }
        .session-title-text { font-weight: 600; font-size: 0.95rem; color: #475569; }

        /* AGENDA MULTI-CHOIX */
        .agenda-container { position: relative; }
        .agenda-menu { 
            position: absolute; right: 0; top: 110%; background: white; border: 2px solid var(--color-rh);
            border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 100;
            display: none; min-width: 160px; padding: 6px;
        }
        .agenda-item { padding: 8px 12px; font-size: 0.75rem; font-weight: 700; border-radius: 6px; cursor: pointer; color: var(--color-rh); transition: 0.2s; }
        .agenda-item:hover { background: var(--color-surface); color: var(--color-cta); }

        /* ICONS RESSOURCES - 30% OPACITY WHEN EMPTY */
        .resource-list { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-top: 8px; }
        .icon-btn-elite { 
            width: 46px; height: 46px; border-radius: 12px; display: flex; align-items: center; justify-content: center; 
            font-size: 1.6rem; background: white; border: 1.5px solid #e2e8f0; position: relative; transition: 0.3s;
        }
        .icon-btn-elite.empty { opacity: 0.3; } /* Toujours en couleur mais translucide */
        .icon-btn-elite.done { border-color: var(--color-done); border-width: 3px; opacity: 1; }
        .valid-check { position: absolute; top: -6px; right: -6px; background: var(--color-done); color: white; width: 18px; height: 18px; border-radius: 50%; font-size: 9px; display: none; align-items: center; justify-content: center; border: 2px solid white; z-index: 10; }
        .icon-btn-elite.done + .valid-check { display: flex; }

        /* FOOTER D'ORIGINE RESTAUR√â */
        footer { background: var(--color-title); color: white; padding: 40px 20px; border-top: 6px solid var(--color-cta); margin-top: auto; }
        .footer-logo { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--color-cta); object-fit: cover; margin-bottom: 15px; }
        .footer-link { color: white; text-decoration: none; transition: 0.3s; display: flex; align-items: center; gap: 10px; font-size: 1rem; margin-bottom: 6px; font-weight: 500; }
        .footer-link:hover { color: var(--color-cta); transform: translateX(5px); }
        .social-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; transition: 0.3s; background: rgba(255,255,255,0.1); }
        .social-icon:hover { transform: translateY(-3px); filter: brightness(1.2); }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>

    <header class="top-bar">
        <div class="max-w-7xl mx-auto px-6 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <img class="logo-header shadow-lg" src="https://projettechacademy.github.io/Projet_Python/Asset/2127845D-F95D-49C0-A22B-88C07817841B.png" alt="PAIA Logo">
                <div>
                    <h1 class="text-xl font-black text-white leading-none">üí´ PAIA ‚ú® <span class="text-[#D9A526]">RH</span></h1>
                    <p class="text-[8px] text-white/50 font-bold uppercase tracking-[0.2em] mt-1">Payroll Automation & Intelligent Architecture</p>
                </div>
            </div>
            <nav class="flex items-center gap-2">
                <a href="https://projettechacademy.github.io/Programme_Formation_Digital_Python/" class="nav-link">üè†</a>
                <a href="https://projettechacademy.github.io/Programme_Formation_Digital_Python/python.html" class="nav-link">üêç</a>
                <a href="https://projettechacademy.github.io/Programme_Formation_Digital_Python/digitale.html" class="nav-link">üöÄ</a>
                <a href="https://projettechacademy.github.io/Programme_Formation_Digital_Python/paie.html" class="nav-link">üí∞</a>
                <a href="https://projettechacademy.github.io/Programme_Formation_Digital_Python/rh.html" class="nav-link active">‚öñÔ∏è</a>
                <a href="https://projettechacademy.github.io/CV_MMPA-CV-Mathilde-Martine-PAISLEY/" target="_blank" class="btn-portfolio ml-3">Portfolio</a>
            </nav>
        </div>
    </header>

    <main class="flex-grow p-4 sm:p-10 max-w-6xl mx-auto w-full">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-black text-violet-950 uppercase tracking-tighter mb-4">Management Strat√©gique RH</h2>
            <div class="relative max-w-lg mx-auto">
                <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" id="searchInput" class="w-full pl-14 pr-6 py-4 rounded-full border-2 border-violet-900 outline-none shadow-sm focus:ring-4 focus:ring-violet-100 transition-all" placeholder="Rechercher une session (ex: Bloc_1)..." oninput="handleSearch()">
            </div>
            <div id="loading" class="mt-6 flex justify-center"><div class="animate-spin rounded-full h-10 w-10 border-b-2 border-cta"></div></div>
        </div>

        <div class="flex justify-center mb-10 overflow-x-auto no-scrollbar">
            <nav id="tabs" class="bg-white p-2 rounded-3xl shadow-md border-2 border-violet-900 flex gap-2"></nav>
        </div>

        <div id="container" class="space-y-6 pb-20"></div>
    </main>

    <footer id="main-footer">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-start gap-12">
            <div class="flex-1">
                <img class="footer-logo shadow-xl" src="https://projettechacademy.github.io/Projet_Python/Asset/Logo_MMPA.jpeg" alt="Logo MMPA">
                <h3 class="text-2xl font-black mb-1">Mathilde Martine PAISLEY</h3>
                <p class="text-[10px] text-white/50 font-bold uppercase tracking-widest mb-6">Payroll Automation & Intelligent Architecture</p>
                <p class="text-sm italic opacity-70 leading-relaxed max-w-xs">
                    "L'architecture intelligente au service de l'automatisation RH strat√©gique."
                </p>
            </div>

            <div class="flex-1">
                <h4 class="text-xs font-bold mb-6 text-cta uppercase tracking-[0.2em]">Contact Direct</h4>
                <div class="flex flex-col gap-3">
                    <a href="https://projettechacademy.github.io/CV_MMPA-CV-Mathilde-Martine-PAISLEY/" target="_blank" class="footer-link">
                        <i class="fas fa-user-circle text-cta"></i> Mathilde Martine PAISLEY
                    </a>
                    <a href="mailto:Mathilde.martine.paisley@gmail.com" class="footer-link">
                        <i class="fas fa-envelope text-cta"></i> Mathilde.martine.paisley@gmail.com
                    </a>
                    <a href="tel:+33685900887" class="footer-link">
                        <i class="fas fa-phone-alt text-cta"></i> 06 85 90 08 87
                    </a>
                </div>
            </div>

            <div class="flex-1">
                <h4 class="text-xs font-bold mb-6 text-cta uppercase tracking-[0.2em]">R√©seaux Sociaux</h4>
                <div class="flex flex-wrap gap-4">
                    <a href="https://chat.whatsapp.com/IoMXFl4o2otExYKCPVj22b" class="social-icon" style="color:#25D366" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://discord.gg/redT9wEE6T" class="social-icon" style="color:#ED4245" title="Discord Red"><i class="fab fa-discord"></i></a>
                    <a href="https://www.linkedin.com/in/mathilde-martine-paisley-1a4422382/" class="social-icon" style="color:#0077b5" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.tiktok.com/@enervyx" class="social-icon" style="color:#FFFFFF" title="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="https://www.instagram.com/enervyx/" class="social-icon" style="color:#E4405F" title="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="text-center mt-12 pt-8 border-t border-white/10 text-[10px] opacity-30 uppercase tracking-[0.5em] font-bold">
            ¬© 31, d√©cembre, 2025 | PAIA by Mathilde Martine PAISLEY
        </div>
    </footer>

    <script>
        const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ1VKl4B0GzwQwCgTyu3i7E-5cuZhdRARKVE4dizA87keDFdeKYdfdF5AmqcgiJcSWMaqihkr7iuOTA/pub?gid=0&single=true&output=csv";
        
        let resources = {};
        let currentTab = 'accueil';
        let currentSearch = '';
        let progress = JSON.parse(localStorage.getItem('paia_rh_v5.5_progress') || '{}');
        
        const catKeys = ["Intro_Python_Gamma", "Cours_Paie", "Audio", "Excel", "Infographie", "Pr√©sentation", "Video"];
        const catEmojis = { "Intro_Python_Gamma":"‚òùÔ∏è", "Cours_Paie":"üìÅ", "Audio":"üéß", "Excel":"üìä", "Infographie":"üñºÔ∏è", "Pr√©sentation":"üìΩÔ∏è", "Video":"üìπ" };

        function init() {
            Papa.parse(CSV_URL, { download: true, header: true, skipEmptyLines: true,
                complete: (res) => { parseData(res.data); document.getElementById('loading').style.display='none'; renderTabs(); switchTab('accueil'); }
            });
        }

        function parseData(data) {
            let curB = null; let curM = "G√©n√©ral";
            data.forEach(row => {
                let t = row['Titres des cat√©gories']?.trim(); 
                if(!t || t === "Emoji" || t === "Titres des cat√©gories" || t === "Calendrier") return;
                
                // D√©tection Blocs
                const blocMatch = t.match(/^(Bloc_\d+)(?!_\d+)/i);
                if (blocMatch) {
                    curB = blocMatch[1].replace('Bloc_', 'B');
                    const fullTitle = t.replace(blocMatch[1], '').replace(/^[ _-]+/, '').trim() || t;
                    if(!resources[curB]) resources[curB] = { id: curB, fullTitle, mods: {} };
                    curM = "G√©n√©ral";
                    return;
                }

                // D√©tection Modules
                const modMatch = t.match(/^(M\d+_Bloc_\d+)/i);
                if (modMatch) {
                    curM = t.replace(modMatch[1], '').replace(/^[. _-]+/, '').trim() || t;
                    if(curB && !resources[curB].mods[curM]) resources[curB].mods[curM] = [];
                    return;
                }

                // D√©tection Sessions
                const sessionMatch = t.match(/^(Bloc_\d+_\d+)/i);
                if (sessionMatch) {
                    const code = sessionMatch[1];
                    const label = t.replace(code, '').replace(/^[ _-]+/, '').replace(/\.pdf$/i, '').trim();
                    if(curB) {
                        if(!resources[curB].mods[curM]) resources[curB].mods[curM] = [];
                        resources[curB].mods[curM].push({ code, label, links: row });
                    }
                }
            });
        }

        function renderTabs() {
            let h = `<button onclick="switchTab('accueil')" id="tab-accueil" class="px-6 py-2 rounded-2xl font-bold">üè† Accueil</button>`;
            Object.keys(resources).sort().forEach(b => {
                h += `<button onclick="switchTab('${b}')" id="tab-${b}" class="px-6 py-2 rounded-2xl font-bold text-slate-400">Bloc ${b.replace('B','')}</button>`;
            });
            document.getElementById('tabs').innerHTML = h;
        }

        function switchTab(t) {
            currentTab = t;
            document.querySelectorAll('#tabs button').forEach(b => { b.classList.remove('bg-violet-900', 'text-white'); b.classList.add('text-slate-400'); });
            const activeTab = document.getElementById('tab-'+t);
            if(activeTab) { activeTab.classList.add('bg-violet-900', 'text-white'); activeTab.classList.remove('text-slate-400'); }
            refreshView();
        }

        function handleSearch() { currentSearch = document.getElementById('searchInput').value.toLowerCase(); refreshView(); }
        function refreshView() { if(currentTab === 'accueil') renderAccueil(); else renderBloc(currentTab); }

        function renderAccueil() {
            let h = `<div class="p-10 rounded-3xl border-2 border-violet-900 text-center bg-white/50 backdrop-blur-sm shadow-xl">
                <h3 class="text-2xl font-black mb-10 text-slate-800 tracking-tight uppercase underline decoration-cta decoration-4 underline-offset-8">Tableau de bord Strat√©gique RH üöÄ</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">`;
            Object.keys(resources).sort().forEach(b => {
                h += `<div class="p-6 border-2 border-violet-900 rounded-2xl bg-white hover:border-cta transition-all cursor-pointer shadow-sm group" onclick="switchTab('${b}')">
                    <h4 class="font-black text-xl mb-2 text-violet-900 group-hover:text-cta">Bloc ${b.replace('B','')}</h4>
                    <p class="text-[10px] text-slate-400 mb-6 uppercase truncate px-2 font-bold">${resources[b].fullTitle}</p>
                    <button class="bg-violet-900 text-white w-full py-3 rounded-2xl text-xs font-black uppercase group-hover:bg-cta group-hover:text-violet-900 transition-all">Consulter</button>
                </div>`;
            });
            document.getElementById('container').innerHTML = h + `</div></div>`;
        }

        function renderBloc(b) {
            const bloc = resources[b];
            let h = `<div class="p-8 rounded-3xl border-l-[12px] border-violet-900 bg-white/40 shadow-inner">
                <h3 class="text-2xl font-black mb-1 uppercase text-slate-700">Bloc ${b.replace('B','')}</h3>
                <p class="text-sm text-slate-400 mb-8 italic font-medium">${bloc.fullTitle}</p>`;
            let found = false;
            for(let m in bloc.mods) {
                const sessions = bloc.mods[m].filter(s => s.label.toLowerCase().includes(currentSearch) || s.code.toLowerCase().includes(currentSearch));
                if(sessions.length === 0) continue;
                found = true;
                const mid = `mod-${b}-${m.replace(/[^a-zA-Z0-9]/g,'')}`;
                h += `<div class="module-card">
                    <div class="module-header" onclick="document.getElementById('${mid}').classList.toggle('hidden')">
                        <h3>Module : ${m}</h3><i class="fas fa-chevron-down text-cta"></i>
                    </div>
                    <div id="${mid}" class="">`;
                sessions.forEach(s => {
                    const firstUrl = Object.values(s.links).find(l => l && l !== "null" && l.trim() !== "") || "#";
                    h += `<div class="session-row" data-code="${s.code}">
                        <div class="flex justify-between items-center flex-wrap gap-4">
                            <div><span class="session-code">${s.code.replace(/_/g,' ')}</span><span class="session-title-text ml-3 font-bold text-slate-600">${s.label}</span></div>
                            <div class="flex items-center gap-4">
                                <button onclick="validateLine('${s.code}')" class="btn-pill-elite">Valider</button>
                                <div class="agenda-container">
                                    <button onclick="toggleAgendaMenu('${s.code}')" class="w-10 h-10 rounded-full bg-white border-2 border-blue-400 text-blue-500 flex items-center justify-center hover:bg-blue-50 transition-all"><i class="fas fa-calendar-alt"></i></button>
                                    <div id="agenda-menu-${s.code}" class="agenda-menu">
                                        <div class="text-[9px] uppercase font-black text-slate-400 p-2 border-b">Relecture pr√©vue :</div>
                                        <div class="agenda-item" onclick="plan('${s.label}', '${firstUrl}', 3)">Dans 3 jours</div>
                                        <div class="agenda-item" onclick="plan('${s.label}', '${firstUrl}', 10)">Dans 10 jours</div>
                                        <div class="agenda-item" onclick="plan('${s.label}', '${firstUrl}', 30)">Dans 30 jours</div>
                                        <div class="agenda-item" onclick="plan('${s.label}', '${firstUrl}', 60)">Dans 60 jours</div>
                                        <div class="agenda-item" onclick="plan('${s.label}', '${firstUrl}', 90)">Dans 90 jours</div>
                                        <div class="agenda-item" onclick="plan('${s.label}', '${firstUrl}', 120)">Dans 120 jours</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="resource-list mt-2">`;
                    catKeys.forEach(k => {
                        let url = s.links[k]; let av = url && url !== "" && url !== "null";
                        h += `<div class="icon-box relative">
                                <div class="icon-btn-elite ${av ? '' : 'empty'}" data-cat="${k}" onclick="${av ? `window.open('${url}','_blank')` : ''}">${catEmojis[k]}<div class="valid-check"><i class="fas fa-check"></i></div></div>
                                <button onclick="toggleProg('${s.code}','${k}')" class="manual-plus absolute bottom-[-4px] right-[-4px] bg-white border border-slate-200 rounded-full w-5 h-5 flex items-center justify-center text-[8px] text-slate-400 hover:text-cta ${av?'':'hidden'}"><i class="fas fa-plus"></i></button>
                            </div>`;
                    });
                    h += `</div></div>`;
                });
                h += `</div></div>`;
            }
            if(!found) h += `<p class="text-center py-10 text-slate-400">Aucune session trouv√©e.</p>`;
            document.getElementById('container').innerHTML = h + `</div>`;
            Object.values(bloc.mods).flat().forEach(s => refreshLine(s.code));
        }

        function toggleAgendaMenu(code) {
            const menu = document.getElementById(`agenda-menu-${code}`);
            document.querySelectorAll('.agenda-menu').forEach(m => { if(m !== menu) m.style.display = 'none'; });
            menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
        }

        function plan(title, url, days) {
            const d = new Date(); d.setDate(d.getDate() + days);
            const iso = d.toISOString().replace(/-|:|\.\d\d\d/g, "");
            const calUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=RELECTURE : ${encodeURIComponent(title)}&dates=${iso}/${iso}&details=Ressource : ${url}&sf=true&output=xml`;
            window.open(calUrl, '_blank');
        }

        function toggleProg(c,k){ let key = c+'_'+k; progress[key]=!progress[key]; localStorage.setItem('paia_rh_v5.5_progress', JSON.stringify(progress)); refreshLine(c); }
        function validateLine(c){ catKeys.forEach(k => progress[c+'_'+k]=true); localStorage.setItem('paia_rh_v5.5_progress', JSON.stringify(progress)); refreshLine(c); }
        function refreshLine(c) {
            const row = document.querySelector(`[data-code="${c}"]`); if(!row) return;
            catKeys.forEach(k => { 
                const icon = row.querySelector(`[data-cat="${k}"]`);
                if(progress[c+'_'+k]) icon.classList.add('done'); else icon.classList.remove('done');
            });
        }

        window.onclick = (e) => { if (!e.target.closest('.agenda-container')) document.querySelectorAll('.agenda-menu').forEach(m => m.style.display = 'none'); };
        window.onload = init;
    </script>
</body>
</html>