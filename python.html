<!doctype html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAIA - Formation Python V2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --color-cta: #D9A526; --color-title: #0F2C48; --color-surface: #F6F2E8; --brandGold: #D9A526; }
        body { font-family: 'Outfit', sans-serif; background-color: var(--color-surface); min-height: 100vh; display: flex; flex-direction: column; }
        .top-bar { background: var(--color-title); padding: 8px 0; border-bottom: 3px solid var(--color-cta); width: 100%; position: sticky; top: 0; z-index: 999; }
        .logo-top { width: 44px; height: 44px; border-radius: 50%; border: 2px solid var(--color-cta); background: white; }
        .nav-emoji { font-size: 1.4rem; padding: 4px; border-radius: 6px; }
        .active-nav { border-bottom: 2px solid var(--color-cta); background: rgba(255,255,255,0.1); }
        .main-footer { background: var(--color-title); color: white; padding: 40px 0 0 0; margin-top: auto; font-family: 'Fira Code', monospace; font-size: 0.85rem; }
        .footer-container { width: 100%; max-width: 1200px; padding: 0 40px; margin: 0 auto; display: flex; gap: 30px; align-items: flex-start; justify-content: space-between; flex-wrap: wrap; }
        .footer-contact-link { color: var(--brandGold); text-decoration: none; }
        .icon-btn { width: 36px; height: 36px; border-radius: 6px; background: rgba(255, 255, 255, 0.06); display: inline-flex; align-items: center; justify-content: center; }
        .copyright-single-line { text-align: center; margin-top: 30px; padding: 15px 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.70rem; color: rgba(255,255,255,0.7); }
        .tab-button { transition: all 0.2s; border-bottom: 3px solid transparent; }
        .tab-button.active-tab { border-bottom-color: var(--color-cta); color: var(--color-title); font-weight: bold; }
        .loading-spinner { border: 3px solid rgba(217, 165, 38, 0.1); width: 30px; height: 30px; border-radius: 50%; border-left-color: var(--color-cta); animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="max-w-full px-6 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <a href="index.html"><img class="logo-top" src="https://projettechacademy.github.io/Projet_Python/Asset/2127845D-F95D-49C0-A22B-88C07817841B.png"></a>
                <span class="text-white font-bold text-sm hidden md:inline">PAIA Python V2.0</span>
            </div>
            <div class="flex items-center gap-4">
                <nav class="flex gap-2">
                    <a href="python.html" class="nav-emoji active-nav" title="Python">üêç</a>
                    <a href="digitale.html" class="nav-emoji opacity-50" title="Digitale">üöÄ</a>
                    <a href="paie.html" class="nav-emoji opacity-50" title="Paie">üí∞</a>
                    <a href="rh.html" class="nav-emoji opacity-50" title="RH">ü§ù</a>
                </nav>
                <a class="btn-portfolio" style="background:#D9A526; color:white; padding:6px 12px; border-radius:6px; font-weight:bold; font-size:0.8rem;" href="https://projettechacademy.github.io/CV_MMPA-CV-Mathilde-Martine-PAISLEY/">Portfolio</a>
            </div>
        </div>
    </div>

    <main class="flex-grow p-6">
        <div class="max-w-7xl mx-auto">
            <header class="text-center mb-6 bg-white p-6 rounded-xl shadow-md border-b-4 border-cta">
                <h1 class="text-3xl font-extrabold text-[#0F2C48]" style="font-family: 'Playfair Display', serif;">Formation Python</h1>
                <div id="loading-status" class="mt-2"><div class="loading-spinner"></div></div>
            </header>
            <div class="bg-white rounded-xl p-4 mb-6 shadow-sm overflow-x-auto">
                <nav class="flex space-x-6 border-b" id="tab-nav">
                    <button onclick="showTab('accueil')" id="tab-accueil" class="tab-button active-tab px-4 py-2">üè† Synth√®se</button>
                    <button onclick="showTab('B1')" id="tab-B1" class="tab-button px-4 py-2 text-gray-500">Bloc B1</button>
                    <button onclick="showTab('B2')" id="tab-B2" class="tab-button px-4 py-2 text-gray-500">Bloc B2</button>
                    <button onclick="showTab('B3')" id="tab-B3" class="tab-button px-4 py-2 text-gray-500">Bloc B3</button>
                </nav>
            </div>
            <div id="resources-container" class="space-y-4"></div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="flex items-center gap-4 text-left">
                <div class="w-14 h-14 rounded-md overflow-hidden border border-white/20"><img src="https://projettechacademy.github.io/Projet_Python/Asset/Logo_MMPA.jpeg"></div>
                <div class="flex flex-col">
                    <div class="font-bold text-[#D9A526]">Mathilde Martine PAISLEY</div>
                    <a href="mailto:Mathilde.martine.paisley@gmail.com" class="footer-contact-link">üìß Email</a>
                    <a href="tel:+33685900887" class="footer-contact-link">üì≤ 06 85 90 08 87</a>
                </div>
            </div>
            <div class="flex flex-col gap-2">
                <div class="text-[#D9A526] font-bold">R√©seaux Sociaux</div>
                <div class="flex gap-3">
                    <a href="https://chat.whatsapp.com/IoMXFl4o2otExYKCPVj22b" class="icon-btn text-[#25D366]"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://discord.gg/redT9wEE6T" class="icon-btn text-[#5865F2]"><i class="fab fa-discord"></i></a>
                    <a href="https://www.linkedin.com/in/mathilde-martine-paisley-1a4422382/" class="icon-btn text-[#0077b5]"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.instagram.com/enervyx/" class="icon-btn text-[#C13584]"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.tiktok.com/@enervyx" class="icon-btn text-white"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
        </div>
        <div class="copyright-single-line">
            üí´ PAIA ‚ú® By Mathilde Martine PAISLEY | V2.0 | Payroll Automation & Intelligent Architecture | ¬© 2025 Tous droits r√©serv√©s
        </div>
    </footer>

    <script>
        const GOOGLE_SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQRK_tBmpTFXHK-e-U-cy_XbjLY2cx4FVbP7X0fhLs34B8DLzIr6yUP_eYo4ueAIzFBABopTCQdd-TK/pub?gid=0&single=true&output=csv";
        let resources = { "B1": { modules: {} }, "B2": { modules: {} }, "B3": { modules: {} } };
        const linkIcons = { "Intro_Python_Gamma": { icon: "‚òùÔ∏è", linkClass: "bg-indigo-600" }, "Cours_Python": { icon: "üêç", linkClass: "bg-cta" }, "Audio": { icon: "üéß", linkClass: "bg-teal-600" }, "Excel": { icon: "üìä", linkClass: "bg-green-600" }, "Infographie": { icon: "üñºÔ∏è", linkClass: "bg-orange-600" }, "Pr√©sentation": { icon: "üìΩÔ∏è", linkClass: "bg-slate-700" }, "Video": { icon: "üìπ", linkClass: "bg-red-500" } };

        function fetchDataAndRender() {
            Papa.parse(GOOGLE_SHEET_CSV_URL, {
                download: true, header: true, skipEmptyLines: true,
                complete: function(results) { processCSVData(results.data); document.getElementById('loading-status').style.display = 'none'; showTab('accueil'); }
            });
        }

        function processCSVData(data) {
            let currentBloc = null; let currentModuleKey = null;
            data.forEach(row => {
                let titleRaw = row['Titres des cat√©gories']; if (!titleRaw) return;
                if (/^B[1-3]_/.test(titleRaw) && !titleRaw.includes('_M')) { currentBloc = titleRaw.split('_')[0]; }
                else if (titleRaw.includes('_M') && !titleRaw.includes('_S')) {
                    if (currentBloc && resources[currentBloc]) {
                        currentModuleKey = titleRaw.replace(/^B\d+_/, '').replace(/_/g, ' - ');
                        if (!resources[currentBloc].modules[currentModuleKey]) resources[currentBloc].modules[currentModuleKey] = [];
                    }
                }
                else if (titleRaw.includes('_S')) {
                    if (currentBloc && currentModuleKey && resources[currentBloc]) {
                        let matchCode = titleRaw.match(/^(B\d+_M\d+_S\d+)/);
                        let fullCode = matchCode ? matchCode[1] : "CODE?";
                        let cleanTitle = titleRaw.substring(fullCode.length).replace(/^[-_\s]+/, '');
                        resources[currentBloc].modules[currentModuleKey].push({
                            title: cleanTitle, fullCode: fullCode,
                            links: { "Intro_Python_Gamma": row['Intro_Python_Gamma'], "Cours_Python": row['Cours_Python'], "Audio": row['Audio'], "Excel": row['Excel'], "Infographie": row['Infographie'], "Pr√©sentation": row['Pr√©sentation'], "Video": row['Video'] }
                        });
                    }
                }
            });
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => { btn.classList.remove('active-tab', 'text-title'); btn.classList.add('text-gray-500'); });
            const activeBtn = document.getElementById(`tab-${tabName}`);
            if(activeBtn) { activeBtn.classList.add('active-tab', 'text-title'); activeBtn.classList.remove('text-gray-500'); }
            if (tabName === 'accueil') renderAccueil(); else renderBloc(tabName);
        }

        function renderAccueil() {
            let html = `<div class="bg-white p-6 rounded-xl shadow-md border-l-8 border-cta text-center"><h2 class="text-2xl font-bold mb-4">√âcosyst√®me Python üêç</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-4">`;
            Object.keys(resources).forEach(key => {
                html += `<div class="p-4 border rounded-lg"><h3 class="font-bold mb-2">Bloc ${key}</h3><button onclick="showTab('${key}')" class="w-full bg-[#0F2C48] text-white py-2 rounded-md text-sm font-bold">Consulter</button></div>`;
            });
            html += `</div></div>`;
            document.getElementById('resources-container').innerHTML = html;
        }

        function renderBloc(blocKey) {
            const bloc = resources[blocKey];
            let html = `<div class="bg-white p-6 rounded-xl shadow-md border-l-8 border-[#0F2C48]"><h2 class="text-xl font-bold mb-6 text-[#0F2C48] uppercase tracking-wider">Formation : Bloc ${blocKey}</h2>`;
            for (const mod in bloc.modules) {
                html += `<div class="mb-6 border rounded-xl overflow-hidden shadow-sm"><div class="bg-gray-50 p-4 font-bold border-b text-[#0F2C48] text-sm">${mod}</div><div class="p-4 space-y-3">`;
                bloc.modules[mod].forEach(session => {
                    html += `<div class="flex flex-col sm:flex-row sm:items-center justify-between p-3 border-b last:border-0 hover:bg-gray-50 transition rounded-lg"><span class="text-sm mb-2 sm:mb-0"><b class="font-mono text-cta">${session.fullCode}</b> - ${session.title}</span><div class="flex gap-2">`;
                    Object.keys(linkIcons).forEach(cat => {
                        let link = session.links[cat]; let icon = linkIcons[cat];
                        if (link && link.trim() !== "" && link !== "null") html += `<a href="${link}" target="_blank" class="${icon.linkClass} text-white w-9 h-9 rounded-full flex items-center justify-center text-[10px] shadow-sm hover:scale-110 transition" title="${cat}">${icon.icon}</a>`;
                        else html += `<span class="bg-gray-100 text-gray-300 w-9 h-9 rounded-full flex items-center justify-center opacity-40 text-[10px]">${icon.icon}</span>`;
                    });
                    html += `</div></div>`;
                });
                html += `</div></div>`;
            }
            html += `</div>`;
            document.getElementById('resources-container').innerHTML = html;
        }
        document.addEventListener('DOMContentLoaded', fetchDataAndRender);
    </script>
</body>
</html>